<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="refresh" content="{{ refresh_interval }}" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weathermonitor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.9.1/css/bulma.min.css" />
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 3em 0 0;
        }
        .container {
            height: 100%;
            max-width: 100% !important;
        }
        .box {
            height: 100%;
            margin: 2em;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8/hammer.min.js"></script>
</head>

<body>
<div class="container">
    <header>
        <nav class="navbar is-dark is-fixed-top">
            <div class="navbar-start">
                {%for station in station_list%}

                <div class="navbar-item has-dropdown is-hoverable">
                    <a class="navbar-link" href="/weatherstation/{{station.lower()}}">{{station}}</a>
                    <div class="navbar-dropdown">
                        <a class="navbar-item" href="/weatherstation/{{station.lower()}}/plots/wind_speed">Wind Speed</a>
                        <a class="navbar-item" href="/weatherstation/{{station.lower()}}/plots/wind_direction">Wind Direction</a>
                    </div>
                </div>

                {%endfor%}
            </div>

            <div class="navbar-end">
              <span class="navbar-item">
                <span class="tag is-info is-medium" id="status">
                  <span class="icon is-small">
                    <i class="fas fa-circle"></i>
                  </span>
                  <span>Live</span>
                </span>
              </span>
            </div>
        </nav>
    </header>


    <hr />
    <div class="box">
        <h1 class="title">{{station}}</h1>
        <h2 last_updated class="subtitle">Last updated: {{status[1]}}</h2>
        {% include subpage+'.html' %}
    </div>
</div>

<script>
    if (navigator.onLine && '{{status[0]}}' === 'True') {
        // Set the text and color of the status bar
        document.getElementById('status').innerHTML = 'Live';
        document.getElementById('status').classList.remove('is-danger');
        document.getElementById('status').classList.add('is-info');
    } else {
        document.getElementById('status').innerHTML = 'Offline';
        document.getElementById('status').classList.remove('is-info');
        document.getElementById('status').classList.add('is-danger');
    }
</script>
</body>